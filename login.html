<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Login - Clínica Dra. Leidi Silva</title>

  <style>
    :root{
      --bg1:#071a2b;
      --bg2:#0b2f52;

      --glass: rgba(255,255,255,.10);
      --glass2: rgba(255,255,255,.06);
      --stroke: rgba(255,255,255,.18);

      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.70);

      --field-bg: rgba(0,0,0,.18);
      --field-stroke: rgba(255,255,255,.14);

      --btn: rgba(0,0,0,.22);
      --btn-hover: rgba(0,0,0,.30);

      --accent: #7ecbff;
      --error: #ff6b6b;
    }

    *{ box-sizing:border-box; }

    body{
      margin:0;
      min-height:100vh;
      display:flex;
      justify-content:center;
      align-items:center;
      font-family: Arial, sans-serif;
      color:var(--text);

      /* Fondo tipo la imagen */
      background:
        radial-gradient(1200px 700px at 30% 25%, rgba(120,200,255,.25), transparent 55%),
        radial-gradient(900px 600px at 75% 70%, rgba(90,140,255,.18), transparent 60%),
        linear-gradient(160deg, var(--bg1), var(--bg2));
    }

    /* ✅ Contenedor para que el logo quede ARRIBA del card */
    .login-wrapper{
      display:flex;
      flex-direction:column;
      align-items:center;
      gap: 16px;
    }

    /* ✅ Logo arriba, centrado */
    .logo-top{
      display:flex;
      justify-content:center;
      align-items:center;
    }
    .logo-top img{
  width: 300px;   /* ⬅️ MÁS GRANDE */
  height: auto;
  object-fit: contain;
  filter: drop-shadow(0 12px 22px rgba(0,0,0,.5));
}



    .login-card{
      width: 360px;
      padding: 26px 26px 22px;
      border-radius: 18px;
      background: linear-gradient(180deg, var(--glass), var(--glass2));
      border: 1px solid var(--stroke);
      box-shadow:
        0 18px 40px rgba(0,0,0,.35),
        inset 0 0 0 1px rgba(255,255,255,.06);
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      position: relative;
      overflow: hidden;
    }

    /* Brillos laterales */
    .login-card::before,
    .login-card::after{
      content:"";
      position:absolute;
      top: 18px;
      bottom: 18px;
      width: 22px;
      filter: blur(8px);
      opacity:.45;
      background: radial-gradient(circle, rgba(126,203,255,.9), transparent 60%);
      pointer-events:none;
    }
    .login-card::before{ left: -10px; }
    .login-card::after{ right: -10px; }

    .title{
      text-align:center;
      margin: 0 0 16px;
      font-size: 14px;
      line-height: 1.25;
      color: var(--muted);
      letter-spacing: .2px;
    }

    .field{
      position: relative;
      margin: 10px 0;
    }

    .field input{
      width:100%;
      height: 44px;
      border-radius: 8px;
      border: 1px solid var(--field-stroke);
      background: rgba(255,255,255,.92);
      outline:none;
      color: #102033;
      padding: 0 12px 0 42px;
      font-size: 14px;
    }
    .field input::placeholder{ color: rgba(16,32,51,.55); }

    .field .left-icon{
      position:absolute;
      left: 12px;
      top: 50%;
      transform: translateY(-50%);
      width: 18px;
      height: 18px;
      opacity:.65;
      fill: rgba(16,32,51,.9);
    }

    .row{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      margin: 10px 0 14px;
      font-size: 12px;
      color: var(--muted);
    }

    .remember{
      display:flex;
      align-items:center;
      gap: 6px;
      user-select:none;
    }
    .remember input{
      width: 14px;
      height: 14px;
      accent-color: var(--accent);
    }

    .row a{
      color: var(--muted);
      text-decoration:none;
    }
    .row a:hover{
      color: rgba(255,255,255,.95);
      text-decoration: underline;
    }

    button{
      width:100%;
      height: 44px;
      border-radius: 8px;
      border: 1px solid rgba(255,255,255,.14);
      background: var(--btn);
      color: rgba(255,255,255,.88);
      font-weight: 700;
      letter-spacing: .6px;
      cursor:pointer;
      text-transform: uppercase;
      box-shadow: 0 10px 18px rgba(0,0,0,.22);
    }
    button:hover{ background: var(--btn-hover); }

    .mensaje-error{
      margin: 12px 0 0;
      min-height: 18px;
      text-align:center;
      color: var(--error);
      font-size: 13px;
    }

    @media (max-width: 420px){
      .login-card{ width: calc(100vw - 28px); }
      .logo-top img{ width: 120px; }
    }
  </style>
</head>

<body>
  <div class="login-wrapper">

    <!-- ✅ LOGO ARRIBA DEL CUADRO -->
    <div class="logo-top">
      <!-- RECOMENDADO: usa tu logo blanco con fondo transparente -->
      <img
        src="https://static.wixstatic.com/media/63e6ec_3973b230e8aa49869f3127b467fb3e6e~mv2.png/v1/fill/w_426,h_426,al_c,q_85,usm_0.66_1.00_0.01,enc_auto/LOGO%20LEIDI%20SILVA%202%20(1).png"
        alt="Logo Clínica Dra. Leidi Silva"
      />
    </div>

    <!-- ✅ CARD LOGIN -->
    <div class="login-card">
      <p class="title">Software Dental<br/>Clínica Dra. Leidi Silva</p>

      <div class="field">
        <svg class="left-icon" viewBox="0 0 24 24" aria-hidden="true">
          <path d="M12 12a4 4 0 1 0-4-4 4 4 0 0 0 4 4Zm0 2c-4.4 0-8 2.2-8 5v1h16v-1c0-2.8-3.6-5-8-5Z"/>
        </svg>
        <input type="email" id="email" placeholder="Correo electrónico" autocomplete="username" required />
      </div>

      <div class="field">
        <svg class="left-icon" viewBox="0 0 24 24" aria-hidden="true">
          <path d="M17 9h-1V7a4 4 0 0 0-8 0v2H7a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2v-8a2 2 0 0 0-2-2Zm-7-2a2 2 0 0 1 4 0v2h-4Z"/>
        </svg>
        <input type="password" id="password" placeholder="Contraseña" autocomplete="current-password" required />
      </div>

      <div class="row">
        <label class="remember">
          <input type="checkbox" id="remember" />
          Remember me
        </label>
        <a href="#" id="forgot">Forgot Password?</a>
      </div>

      <button id="boton-login">LOGIN</button>

      <p id="error" class="mensaje-error"></p>
    </div>
  </div>

  <script type="module">
    import { createClient } from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm";

    const supabaseUrl = "https://dmcfrmpqlkrqbpjhrfyo.supabase.co";
    const supabaseKey = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRtY2ZybXBxbGtycWJwamhyZnlvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI5MzU0MDIsImV4cCI6MjA3ODUxMTQwMn0.YY_6t_lCTs5mK-a_eEdBFa6l9_NBM3B4YDtWOXayCBE";
    const supabase = createClient(supabaseUrl, supabaseKey);

    const emailEl = document.getElementById("email");
    const passEl = document.getElementById("password");
    const errorDiv = document.getElementById("error");
    const rememberEl = document.getElementById("remember");

    // Prefill si "Remember me" estaba guardado
    const savedEmail = localStorage.getItem("remember_email");
    if (savedEmail) {
      emailEl.value = savedEmail;
      rememberEl.checked = true;
    }

    document.getElementById("boton-login").addEventListener("click", async () => {
      const email = emailEl.value.trim();
      const password = passEl.value.trim();
      errorDiv.textContent = "";

      if (!email || !password) {
        errorDiv.textContent = "Por favor completa todos los campos.";
        return;
      }

      try {
        const { data, error } = await supabase.auth.signInWithPassword({ email, password });
        console.log("➡️ Login:", { data, error });

        if (error) {
          errorDiv.textContent = "Error: " + error.message;
          return;
        }

        // Remember me
        if (rememberEl.checked) localStorage.setItem("remember_email", email);
        else localStorage.removeItem("remember_email");

        alert("Inicio de sesión exitoso ✅");
        localStorage.setItem("usuario_logueado", email);

        // ✅ Redirigir a la página de historia clínica:
        window.location.href = "https://cacg1022.github.io/ODONTOLOGIA/historia-clinica.html";
      } catch (err) {
        console.error("❌ Error inesperado:", err);
        errorDiv.textContent = "Error inesperado al conectar con Supabase.";
      }
    });

    // Forgot Password (opcional)
    document.getElementById("forgot").addEventListener("click", async (e) => {
      e.preventDefault();
      errorDiv.textContent = "";

      const email = emailEl.value.trim();
      if (!email) {
        errorDiv.textContent = "Escribe tu correo para enviarte el enlace de recuperación.";
        return;
      }

      try {
        const { error } = await supabase.auth.resetPasswordForEmail(email, {
          redirectTo: "https://cacg1022.github.io/ODONTOLOGIA/reset.html"
        });

        if (error) {
          errorDiv.textContent = "Error: " + error.message;
          return;
        }

        alert("Te enviamos un correo para restablecer tu contraseña ✅");
      } catch (err) {
        console.error(err);
        errorDiv.textContent = "No se pudo enviar el correo de recuperación.";
      }
    });
  </script>
</body>
</html>







